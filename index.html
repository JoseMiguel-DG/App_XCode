<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="Cache-Control" content="no-store" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="theme-color" content="#2b1655" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Engine-Mode Tracker" />

    <title>Engine-Mode Tracker</title>

    <link rel="manifest" href="manifest.json" />
    <link rel="icon" href="assets/icons/favicon-16.png" sizes="16x16" />
    <link rel="icon" href="assets/icons/favicon-32.png" sizes="32x32" />
    <link rel="icon" href="assets/icons/icon-192.png" sizes="192x192" />
    <link rel="icon" href="assets/icons/icon-512.png" sizes="512x512" />
    <link rel="apple-touch-icon" href="assets/icons/apple-touch-icon.png" />

    <!-- iOS splash screens -->
    <link
      rel="apple-touch-startup-image"
      href="assets/splash/splash-640x1136.png"
      media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)"
    />
    <link
      rel="apple-touch-startup-image"
      href="assets/splash/splash-750x1334.png"
      media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)"
    />
    <link
      rel="apple-touch-startup-image"
      href="assets/splash/splash-828x1792.png"
      media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)"
    />
    <link
      rel="apple-touch-startup-image"
      href="assets/splash/splash-1125x2436.png"
      media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)"
    />
    <link
      rel="apple-touch-startup-image"
      href="assets/splash/splash-1170x2532.png"
      media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3)"
    />
    <link
      rel="apple-touch-startup-image"
      href="assets/splash/splash-1242x2688.png"
      media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)"
    />
    <link
      rel="apple-touch-startup-image"
      href="assets/splash/splash-1536x2048.png"
      media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)"
    />
    <link
      rel="apple-touch-startup-image"
      href="assets/splash/splash-1668x2224.png"
      media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)"
    />
    <link
      rel="apple-touch-startup-image"
      href="assets/splash/splash-1668x2388.png"
      media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)"
    />
    <link
      rel="apple-touch-startup-image"
      href="assets/splash/splash-2048x2732.png"
      media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)"
    />

    <link rel="stylesheet" href="styles.css?v=0.10.5" />
  </head>
  <body>
    <div class="app">
      <div class="update-toast" id="updateToast" hidden>
        <p class="update-toast__text">Nueva version disponible.</p>
        <button class="button button--primary" id="updateNow">Actualizar</button>
      </div>
      <header class="app__header">
        <div class="brand">
          <img class="brand__logo" src="assets/brand-mark.png" alt="Engine-Mode Tracker" />
          <div>
            <p class="app__subtitle">Engine-Mode Tracker</p>
            <h1 class="app__title">Smart Training</h1>
          </div>
        </div>
        <div class="header__actions">
          <div class="profile-menu" id="profileMenu">
            <button
              class="icon-button profile-button"
              id="profileButton"
              aria-label="Perfil"
              title="Perfil"
            >
              <img class="profile-avatar" id="profileAvatar" alt="Avatar" />
              <svg class="profile-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path
                  d="M20 21a8 8 0 0 0-16 0"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4z"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </button>
            <div class="profile-card" id="profileMenuCard">
              <p class="profile-card__title" id="profileMenuName">Perfil</p>
              <p class="profile-card__meta" id="profileMenuEmail"></p>
              <p class="profile-card__meta" id="profileMenuGoal"></p>
              <div class="profile-card__actions">
                <button class="button button--ghost" data-route="profile">Ver perfil</button>
                <button class="button button--danger" id="profileLogout">Cerrar sesion</button>
              </div>
            </div>
          </div>
          <button
            class="icon-button"
            id="settingsButton"
            data-route="settings"
            aria-label="Ajustes"
            title="Ajustes"
          >
            <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
              <path
                d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M19.4 15a1.7 1.7 0 0 0 .33 1.82l.04.04a2 2 0 1 1-2.83 2.83l-.04-.04a1.7 1.7 0 0 0-1.82-.33 1.7 1.7 0 0 0-1 1.54V21a2 2 0 1 1-4 0v-.06a1.7 1.7 0 0 0-1-1.54 1.7 1.7 0 0 0-1.82.33l-.04.04a2 2 0 1 1-2.83-2.83l.04-.04A1.7 1.7 0 0 0 4.6 15a1.7 1.7 0 0 0-1.54-1H3a2 2 0 1 1 0-4h.06a1.7 1.7 0 0 0 1.54-1 1.7 1.7 0 0 0-.33-1.82l-.04-.04a2 2 0 1 1 2.83-2.83l.04.04A1.7 1.7 0 0 0 9 4.6a1.7 1.7 0 0 0 1-1.54V3a2 2 0 1 1 4 0v.06a1.7 1.7 0 0 0 1 1.54 1.7 1.7 0 0 0 1.82-.33l.04-.04a2 2 0 1 1 2.83 2.83l-.04.04A1.7 1.7 0 0 0 19.4 9c.4.3.65.77.66 1.27V10c0 .5-.26.97-.66 1.27"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </button>
          <span class="status" id="statusBadge">Offline</span>
        </div>
      </header>

      <nav class="app__nav">
        <button class="nav__button" data-route="home">Inicio</button>
        <button class="nav__button" data-route="train">Entrenar</button>
        <button class="nav__button" data-route="routines">Rutinas</button>
        <button class="nav__button" data-route="history">Historial</button>
        <button class="nav__button" data-route="records">Records</button>
        <button class="nav__button" data-route="exercises">Biblioteca</button>
      </nav>

      <main class="app__content">
        <section class="panel" data-view="auth" hidden>
          <div class="panel__header">
            <div>
              <h2>Iniciar sesion</h2>
              <p class="panel__subtitle">Accede o crea tu cuenta para sincronizar tu progreso.</p>
            </div>
          </div>
          <div class="card">
            <div class="form__grid" id="cloudAuthForm">
              <div class="auth-tabs" id="authTabs" role="tablist" aria-label="Acceso">
                <button
                  class="auth-tab is-active"
                  type="button"
                  data-auth-tab="login"
                  aria-controls="authLoginPanel"
                  aria-selected="true"
                >
                  Entrar
                </button>
                <button
                  class="auth-tab"
                  type="button"
                  data-auth-tab="signup"
                  aria-controls="authSignupPanel"
                  aria-selected="false"
                >
                  Crear cuenta
                </button>
              </div>

              <div class="auth-panel" id="authLoginPanel">
                <div class="form__field">
                  <label class="form__label" for="cloudEmail">Email</label>
                  <input
                    class="form__input"
                    id="cloudEmail"
                    type="email"
                    autocomplete="email"
                    placeholder="tu@email.com"
                  />
                </div>
                <div class="form__field">
                  <label class="form__label" for="cloudPassword">Contrasena</label>
                  <input
                    class="form__input"
                    id="cloudPassword"
                    type="password"
                    autocomplete="current-password"
                    placeholder="********"
                  />
                </div>
                <p class="form__error" id="cloudError"></p>
                <div class="form__actions">
                  <button class="button button--primary" id="cloudLogin">Entrar</button>
                  <button class="text-button" id="forgotPassword" type="button">
                    ¿Olvidaste tu contraseña?
                  </button>
                </div>
              </div>

              <div class="auth-panel" id="authSignupPanel" hidden>
                <div class="form__field">
                  <label class="form__label" for="signupName">Nombre</label>
                  <input
                    class="form__input"
                    id="signupName"
                    type="text"
                    autocomplete="name"
                    placeholder="Tu nombre"
                  />
                </div>
                <div class="form__field">
                  <label class="form__label" for="signupEmail">Email</label>
                  <input
                    class="form__input"
                    id="signupEmail"
                    type="email"
                    autocomplete="email"
                    placeholder="tu@email.com"
                  />
                </div>
                <div class="form__field">
                  <label class="form__label" for="signupPassword">Contrasena</label>
                  <input
                    class="form__input"
                    id="signupPassword"
                    type="password"
                    autocomplete="new-password"
                    placeholder="Minimo 6 caracteres"
                  />
                </div>
                <div class="form__field">
                  <label class="form__label" for="signupPasswordConfirm">Repite la contrasena</label>
                  <input
                    class="form__input"
                    id="signupPasswordConfirm"
                    type="password"
                    autocomplete="new-password"
                    placeholder="********"
                  />
                </div>
                <p class="form__error" id="cloudSignupError"></p>
                <div class="form__actions">
                  <button class="button button--primary" id="cloudSignup">Crear cuenta</button>
                </div>
              </div>

              <div class="auth-panel" id="authRecoveryPanel" hidden>
                <p class="card__text">
                  Define una nueva contraseña para recuperar el acceso a tu cuenta.
                </p>
                <div class="form__field">
                  <label class="form__label" for="recoveryPassword">Nueva contraseña</label>
                  <input
                    class="form__input"
                    id="recoveryPassword"
                    type="password"
                    autocomplete="new-password"
                    placeholder="Minimo 6 caracteres"
                  />
                </div>
                <div class="form__field">
                  <label class="form__label" for="recoveryPasswordConfirm">Repite la contraseña</label>
                  <input
                    class="form__input"
                    id="recoveryPasswordConfirm"
                    type="password"
                    autocomplete="new-password"
                    placeholder="********"
                  />
                </div>
                <p class="form__error" id="recoveryError"></p>
                <div class="form__actions">
                  <button class="button button--primary" id="recoverySubmit">
                    Actualizar contraseña
                  </button>
                </div>
              </div>

              <div class="status-row">
                <span class="status-dot" id="cloudStatusDotUnauthed"></span>
                <p class="card__text" id="cloudStatusUnauthed">No autenticado.</p>
              </div>
            </div>
          </div>
        </section>

        <section class="panel" data-view="home" hidden>
          <div class="panel__header">
            <div>
              <h2>Inicio</h2>
              <p class="panel__subtitle">Resumen de rendimiento y proxima sesion.</p>
            </div>
          </div>

          <div class="card hero-card">
            <div>
              <p class="hero-card__eyebrow">Panel de rendimiento</p>
              <h3 class="hero-card__title">Controla el progreso con sesiones reales.</h3>
              <p class="card__text">
                Visualiza volumen, PRs y constancia sin perder el foco. Todo se sincroniza con tu cuenta.
              </p>
              <div class="hero-card__actions">
                <button class="button button--primary" id="homeGoTrain">Empezar sesion</button>
                <button class="button button--ghost" data-route="routines">Ver rutinas</button>
              </div>
            </div>
            <img class="hero-card__image" src="assets/hero-workout.svg" alt="Entrenamiento" />
          </div>

          <div class="metric-grid">
            <div class="card metric-card" id="homeConsistencyCard" hidden>
              <p class="metric-card__label">Sesiones en 7 dias</p>
              <p class="metric-card__value" id="homeConsistencyValue"></p>
              <div class="progress">
                <span class="progress__bar" id="homeConsistencyBar"></span>
              </div>
            </div>
            <div class="card metric-card" id="homeVolumeCard" hidden>
              <p class="metric-card__label">Volumen semanal</p>
              <p class="metric-card__value" id="homeVolumeValue"></p>
              <p class="metric-card__delta" id="homeVolumeDelta"></p>
            </div>
            <div class="card metric-card" id="homePrsCard" hidden>
              <p class="metric-card__label">PRs recientes</p>
              <p class="metric-card__value" id="homePrsValue"></p>
              <p class="metric-card__delta" id="homePrsDelta"></p>
            </div>
          </div>

          <div class="card chart-card" id="homeChartCard" hidden>
            <div class="card__row">
              <div>
                <p class="card__title">Rendimiento 14 dias</p>
                <p class="card__text">Carga total por sesion.</p>
              </div>
              <span class="pill">Tendencia</span>
            </div>
            <div class="sparkline">
              <svg viewBox="0 0 240 80" aria-hidden="true" focusable="false">
                <polyline
                  id="homeSparkline"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="3"
                  points=""
                />
              </svg>
            </div>
          </div>

          <div class="card" id="homeNextSessionCard" hidden>
            <p class="card__title">Proxima sesion</p>
            <p class="card__text" id="homeNextSessionTitle"></p>
            <div class="card__row">
              <div class="mini-list" id="homeNextSessionList"></div>
              <button class="button button--primary" id="homeGoTrain">Ir a Entrenar</button>
            </div>
          </div>

          <div class="card" id="homeProfileCard" hidden>
            <div class="card__row">
              <div>
                <p class="card__title">Perfil</p>
                <p class="card__text" id="homeProfileSummary"></p>
              </div>
              <button class="button button--ghost" data-route="profile">Editar</button>
            </div>
          </div>

        </section>

        <section class="panel" data-view="train">
          <div class="panel__header">
            <div>
              <h2>Entrenar</h2>
              <p class="panel__subtitle">Elige modo de entrenamiento y registra tu sesion.</p>
            </div>
          </div>

          <div class="train-switch">
            <button class="train-switch__button is-active" id="trainModeGym" type="button">
              Gym
            </button>
            <button class="train-switch__button" id="trainModeRun" type="button">
              Running
            </button>
          </div>

          <div class="train-panel" id="trainGymPanel">
            <div class="card">
              <label class="form__label" for="routineDaySelect">Dia</label>
              <select class="form__input" id="routineDaySelect"></select>
              <p class="form__error" id="routineDaySelectError"></p>
            </div>

            <div class="card" id="routineDayPreview">
              <p class="card__title" id="routineDayName">Sin rutina</p>
              <p class="card__text" id="routineDayNotes"></p>
              <ul class="list list--compact" id="routineDayItems"></ul>
            </div>

            <div class="panel__actions" id="trainingActionButtons">
              <button class="button button--primary" id="startSessionButton">Iniciar sesion</button>
              <button class="button button--ghost" id="resumeSessionButton" hidden>
                Reanudar sesion
              </button>
              <button class="button button--danger" id="finishSessionFromHome" hidden>
                Finalizar sesion
              </button>
            </div>
          </div>

          <div class="train-panel" id="trainRunPanel" hidden>
            <div class="card run-hero">
              <div>
                <p class="hero-card__eyebrow">Performance running</p>
                <h3 class="hero-card__title">Registra tiempo, distancia y ritmo con precision.</h3>
                <p class="card__text">Datos limpios para seguimiento tecnico y comparables.</p>
              </div>
            </div>

            <div class="records-grid">
              <div class="card records-metric">
                <p class="records-metric__label">Total 7 dias</p>
                <p class="records-metric__value" id="runningTotalValue">-</p>
                <p class="records-metric__meta" id="runningTotalMeta">km acumulados</p>
              </div>
              <div class="card records-metric">
                <p class="records-metric__label">Ritmo medio</p>
                <p class="records-metric__value" id="runningAvgPaceValue">-</p>
                <p class="records-metric__meta" id="runningAvgPaceMeta">Ultimos 7 dias</p>
              </div>
              <div class="card records-metric">
                <p class="records-metric__label">Ultima sesion</p>
                <p class="records-metric__value" id="runningLastValue">-</p>
                <p class="records-metric__meta" id="runningLastMeta">Sin datos</p>
              </div>
            </div>

            <div class="card run-form">
              <div class="records-controls__row">
                <div class="form__field">
                  <label class="form__label" for="runningDate">Fecha</label>
                  <input class="form__input" id="runningDate" type="date" />
                </div>
                <div class="form__field">
                  <label class="form__label" for="runningDuration">Tiempo</label>
                  <input class="form__input" id="runningDuration" type="time" step="1" />
                </div>
                <div class="form__field">
                  <label class="form__label" for="runningDistance">Distancia (km)</label>
                  <input class="form__input" id="runningDistance" type="number" step="0.01" />
                </div>
                <div class="form__field">
                  <label class="form__label" for="runningPace">Ritmo</label>
                  <input
                    class="form__input"
                    id="runningPace"
                    type="text"
                    placeholder="mm:ss/km"
                  />
                </div>
              </div>
              <div class="form__field">
                <label class="form__label" for="runningNotes">Notas</label>
                <textarea class="form__input" id="runningNotes" rows="2"></textarea>
              </div>
              <div class="panel__actions">
                <button class="button button--primary" id="runningSave" type="button">
                  Guardar running
                </button>
              </div>
              <p class="form__error" id="runningError"></p>
            </div>

            <div class="card records-table">
              <div class="records-table__head records-table__head--running">
                <span>Fecha</span>
                <span>Distancia</span>
                <span>Tiempo</span>
                <span>Ritmo</span>
                <span>Notas</span>
              </div>
              <div class="records-table__body" id="runningList"></div>
            </div>
          </div>
        </section>

        <section class="panel" data-view="history" hidden>
          <div class="panel__header">
            <div>
              <h2>Historial</h2>
              <p class="panel__subtitle">Sesiones pasadas y registros guardados.</p>
            </div>
          </div>

          <div class="train-switch">
            <button class="train-switch__button is-active" id="historyModeGym" type="button">
              Gym
            </button>
            <button class="train-switch__button" id="historyModeRun" type="button">
              Running
            </button>
          </div>

          <div class="train-panel" id="historyGymPanel">
            <div class="card" id="historyDetail" hidden>
              <div class="panel__header panel__header--tight">
                <div>
                  <button class="button button--ghost" id="historyBack">Volver</button>
                  <h3 id="historyDetailTitle">Sesion</h3>
                  <p class="panel__subtitle" id="historyDetailMeta"></p>
                </div>
                <button class="button button--danger" id="historyDelete">Eliminar</button>
              </div>
              <div class="stack" id="historyDetailList"></div>
            </div>

            <ul class="list" id="historyList"></ul>
          </div>

          <div class="train-panel" id="historyRunPanel" hidden>
            <div class="card records-table">
              <div class="records-table__head records-table__head--running">
                <span>Fecha</span>
                <span>Distancia</span>
                <span>Tiempo</span>
                <span>Ritmo</span>
                <span>Notas</span>
              </div>
              <div class="records-table__body" id="historyRunningList"></div>
            </div>
          </div>
        </section>

        <section class="panel" data-view="records" hidden>
          <div class="panel__header">
            <div>
              <h2>Records</h2>
              <p class="panel__subtitle">Vista tecnica de PRs por ejercicio y fuerza estimada.</p>
            </div>
          </div>

          <div class="train-switch">
            <button class="train-switch__button is-active" id="recordsModeGym" type="button">
              Gym
            </button>
            <button class="train-switch__button" id="recordsModeRun" type="button">
              Running
            </button>
          </div>

          <div class="train-panel" id="recordsGymPanel">
            <div class="card records-hero">
              <div>
                <p class="hero-card__eyebrow">Analisis de fuerza</p>
                <h3 class="hero-card__title">Todos tus PRs en un panel de control profesional.</h3>
                <p class="card__text">
                  Consulta tu mejor marca, e1RM y sesiones registradas por ejercicio.
                </p>
              </div>
            </div>

            <div class="records-grid">
              <div class="card records-metric">
                <p class="records-metric__label">PRs totales</p>
                <p class="records-metric__value" id="recordsTotalValue">-</p>
                <p class="records-metric__meta" id="recordsTotalMeta">Ejercicios con PR</p>
              </div>
              <div class="card records-metric">
                <p class="records-metric__label">Mejor PR</p>
                <p class="records-metric__value" id="recordsBestValue">-</p>
                <p class="records-metric__meta" id="recordsBestMeta">Sin datos</p>
              </div>
              <div class="card records-metric">
                <p class="records-metric__label">Ultimo PR</p>
                <p class="records-metric__value" id="recordsLastValue">-</p>
                <p class="records-metric__meta" id="recordsLastMeta">Sin datos</p>
              </div>
            </div>

            <div class="card records-controls">
              <div class="records-controls__row">
                <div class="form__field">
                  <label class="form__label" for="recordsSearch">Buscar ejercicio</label>
                  <input
                    class="form__input"
                    id="recordsSearch"
                    type="search"
                    placeholder="Press banca, sentadilla..."
                  />
                </div>
                <div class="form__field">
                  <label class="form__label" for="recordsCategoryFilter">Categoria</label>
                  <select class="form__input" id="recordsCategoryFilter"></select>
                </div>
              </div>
            </div>

            <div class="card records-table">
              <div class="records-table__head">
                <span>Ejercicio</span>
                <span>PR</span>
                <span>Fecha</span>
                <span>Sesiones</span>
              </div>
              <div class="records-table__body" id="recordsList"></div>
            </div>
          </div>

          <div class="train-panel" id="recordsRunPanel" hidden>
            <div class="card run-hero">
              <div>
                <p class="hero-card__eyebrow">Running analytics</p>
                <h3 class="hero-card__title">Controla volumen, ritmo y consistencia.</h3>
                <p class="card__text">Resumen tecnico de tus carreras en 30 dias.</p>
              </div>
            </div>

            <div class="records-grid">
              <div class="card records-metric">
                <p class="records-metric__label">Total 30 dias</p>
                <p class="records-metric__value" id="recordsRunningTotalValue">-</p>
                <p class="records-metric__meta" id="recordsRunningTotalMeta">km acumulados</p>
              </div>
              <div class="card records-metric">
                <p class="records-metric__label">Ritmo medio</p>
                <p class="records-metric__value" id="recordsRunningPaceValue">-</p>
                <p class="records-metric__meta" id="recordsRunningPaceMeta">Ultimos 30 dias</p>
              </div>
              <div class="card records-metric">
                <p class="records-metric__label">Sesion mas larga</p>
                <p class="records-metric__value" id="recordsRunningLongestValue">-</p>
                <p class="records-metric__meta" id="recordsRunningLongestMeta">Sin datos</p>
              </div>
            </div>

            <div class="card records-table">
              <div class="records-table__head records-table__head--running">
                <span>Fecha</span>
                <span>Distancia</span>
                <span>Tiempo</span>
                <span>Ritmo</span>
                <span>Notas</span>
              </div>
              <div class="records-table__body" id="recordsRunningList"></div>
            </div>
          </div>
        </section>

        <section class="panel" data-view="profile" hidden>
          <div class="panel__header">
            <div>
              <h2>Perfil</h2>
              <p class="panel__subtitle">Personaliza tus datos para adaptar la app.</p>
            </div>
          </div>
          <div class="card">
            <div class="form__grid">
              <div class="profile-upload">
                <div class="profile-upload__avatar" id="profileAvatarLarge"></div>
                <div class="profile-upload__actions">
                  <label class="button button--ghost" for="profileAvatarInput">Subir foto</label>
                  <input
                    id="profileAvatarInput"
                    type="file"
                    accept="image/*"
                    hidden
                  />
                </div>
              </div>
              <div class="form__field">
                <label class="form__label" for="profileEmail">Email</label>
                <input class="form__input" id="profileEmail" type="email" readonly />
              </div>
              <div class="form__field">
                <label class="form__label" for="profileName">Nombre</label>
                <input class="form__input" id="profileName" type="text" placeholder="Tu nombre" />
              </div>
              <div class="form__field">
                <label class="form__label" for="profileGoal">Objetivo principal</label>
                <input
                  class="form__input"
                  id="profileGoal"
                  type="text"
                  placeholder="Ej. Ganar fuerza, recomposicion"
                />
              </div>
              <div class="form__field">
                <label class="form__label" for="profileExperience">Nivel</label>
                <select class="form__input" id="profileExperience">
                  <option value="">Selecciona</option>
                  <option value="principiante">Principiante</option>
                  <option value="intermedio">Intermedio</option>
                  <option value="avanzado">Avanzado</option>
                </select>
              </div>
              <div class="form__field">
                <label class="form__label" for="profileAge">Edad</label>
                <input class="form__input" id="profileAge" type="number" min="0" />
              </div>
              <div class="form__field">
                <label class="form__label" for="profileSex">Sexo</label>
                <select class="form__input" id="profileSex">
                  <option value="">Selecciona</option>
                  <option value="masculino">Masculino</option>
                  <option value="femenino">Femenino</option>
                  <option value="otro">Otro</option>
                </select>
              </div>
              <div class="form__field">
                <label class="form__label" for="profileFrequency">Frecuencia semanal</label>
                <input
                  class="form__input"
                  id="profileFrequency"
                  type="number"
                  min="0"
                  placeholder="Ej. 4"
                />
              </div>
              <div class="form__field">
                <label class="form__label" for="profileHeight">Altura (cm)</label>
                <input class="form__input" id="profileHeight" type="number" min="0" />
              </div>
              <div class="form__field">
                <label class="form__label" for="profileWeight">Peso (kg)</label>
                <input class="form__input" id="profileWeight" type="number" min="0" />
              </div>
              <div class="form__field">
                <label class="form__label" for="profileNotes">Notas</label>
                <textarea
                  class="form__input form__input--textarea"
                  id="profileNotes"
                  rows="3"
                  placeholder="Observaciones o preferencias"
                ></textarea>
              </div>
            </div>
            <p class="form__error" id="profileError"></p>
            <div class="form__actions">
              <button class="button button--primary" id="saveProfile">Guardar perfil</button>
            </div>
          </div>
        </section>

        <section class="panel" data-view="routines" hidden>
          <div class="panel__header">
            <div>
              <h2>Rutinas</h2>
              <p class="panel__subtitle">Crea plantillas por dia.</p>
            </div>
            <button class="button button--primary" id="newRoutineDayButton">+ Nuevo dia</button>
          </div>

          <form class="form" id="routineDayForm" hidden>
            <h4 class="form__title">Nuevo dia</h4>
            <div class="form__grid">
              <div class="form__field">
                <label class="form__label" for="routineDayNameInput">Nombre*</label>
                <input
                  class="form__input"
                  id="routineDayNameInput"
                  type="text"
                  placeholder="Ej. Pecho, Push A"
                  maxlength="40"
                  required
                />
              </div>
              <div class="form__field">
                <label class="form__label" for="routineDayNotesInput">Notas</label>
                <textarea
                  class="form__input form__input--textarea"
                  id="routineDayNotesInput"
                  rows="2"
                  placeholder="Opcional"
                ></textarea>
              </div>
            </div>
            <p class="form__error" id="routineDayError"></p>
            <div class="form__actions">
              <button class="button button--primary" type="submit">Guardar</button>
              <button class="button button--ghost" type="button" id="cancelRoutineDay">Cancelar</button>
            </div>
          </form>

          <ul class="list" id="routineDayList"></ul>

          <div class="card" id="routineEditor" hidden>
            <div class="panel__header panel__header--tight">
              <div>
                <h3 id="routineEditorTitle">Editar dia</h3>
                <p class="panel__subtitle" id="routineEditorMeta"></p>
              </div>
              <div class="panel__actions">
                <button
                  class="icon-button icon-button--toggle"
                  id="toggleRoutineEditFields"
                  title="Mostrar edicion"
                  aria-label="Mostrar edicion"
                >
                  <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                    <path
                      d="M6 9l6 6 6-6"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </button>
                <button class="icon-button" id="duplicateRoutineDay" title="Duplicar" aria-label="Duplicar">
                  <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                    <path
                      d="M7 7h10v12H7z"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M5 5h10v2H5z"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </button>
                <button
                  class="icon-button icon-button--danger"
                  id="deleteRoutineDay"
                  title="Eliminar"
                  aria-label="Eliminar"
                >
                  <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                    <path
                      d="M3 6h18"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M8 6V4h8v2"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M6 6l1 14h10l1-14"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </button>
              </div>
            </div>

            <div class="form__grid" id="routineEditFields" hidden>
              <div class="form__field">
                <label class="form__label" for="routineDayEditName">Nombre*</label>
                <input
                  class="form__input"
                  id="routineDayEditName"
                  type="text"
                  maxlength="40"
                  required
                />
              </div>
              <div class="form__field">
                <label class="form__label" for="routineDayEditNotes">Notas</label>
                <textarea
                  class="form__input form__input--textarea"
                  id="routineDayEditNotes"
                  rows="2"
                  placeholder="Opcional"
                ></textarea>
              </div>
              <p class="form__error" id="routineEditorError"></p>
              <div class="form__actions">
                <button class="button button--primary" id="saveRoutineDayEdits">Guardar cambios</button>
              </div>
            </div>

            <div class="panel__header panel__header--tight">
              <h3>Ejercicios</h3>
            </div>
            <ul class="list" id="routineItemList"></ul>

            <div class="form__grid">
              <div class="form__field">
                <label class="form__label" for="routineExerciseSearch">Buscar ejercicio</label>
                <input
                  class="form__input"
                  id="routineExerciseSearch"
                  type="search"
                  placeholder="Nombre..."
                />
              </div>
              <div class="form__field">
                <label class="form__label" for="routineCategoryFilter">Categoria</label>
                <select class="form__input" id="routineCategoryFilter"></select>
              </div>
              <div class="form__field">
                <label class="form__label" for="routineExerciseSelect">Ejercicio</label>
                <select class="form__input" id="routineExerciseSelect"></select>
              </div>
              <div class="form__actions">
                <button class="button button--primary" id="addRoutineItem">+ Agregar ejercicio</button>
              </div>
            </div>
          </div>
        </section>

        <section class="panel" data-view="exercises" hidden>
          <div class="panel__header">
            <div>
              <h2>Ejercicios</h2>
              <p class="panel__subtitle">
                Gestiona tus categorías y ejercicios guardados localmente.
              </p>
            </div>
            <button class="button button--primary" id="newCategoryButton">+ Nueva categoría</button>
          </div>

          <form class="form" id="categoryForm" hidden>
            <div class="form__row">
              <div class="form__field">
                <label class="form__label" for="categoryName">Nombre de la categoría</label>
                <input
                  class="form__input"
                  id="categoryName"
                  type="text"
                  placeholder="Ej. Pecho"
                  maxlength="40"
                  required
                />
                <p class="form__error" id="categoryError"></p>
              </div>
              <div class="form__actions">
                <button class="button button--primary" type="submit">Guardar</button>
                <button class="button button--ghost" type="button" id="cancelCategory">Cancelar</button>
              </div>
            </div>
          </form>

          <ul class="list" id="categoryList"></ul>
        </section>

        <section class="panel" data-view="category" hidden>
          <div class="panel__header">
            <div>
              <button class="button button--ghost" id="backToCategories">← Volver</button>
              <h2 id="categoryTitle">Categoría</h2>
              <p class="panel__subtitle" id="categoryMeta"></p>
            </div>
            <div class="panel__actions">
              <button class="button button--ghost" id="renameCategory">Renombrar</button>
              <button class="button button--danger" id="deleteCategory">Eliminar</button>
            </div>
          </div>
          <p class="form__error" id="categoryDetailError"></p>

          <div class="search">
            <input
              class="form__input"
              id="exerciseSearch"
              type="search"
              placeholder="Buscar ejercicio..."
            />
          </div>

          <div class="panel__header panel__header--tight">
            <h3>Ejercicios</h3>
            <button class="button button--primary" id="newExerciseButton">+ Nuevo ejercicio</button>
          </div>

          <form class="form" id="exerciseForm" hidden>
            <h4 class="form__title" id="exerciseFormTitle">Nuevo ejercicio</h4>
            <input type="hidden" id="exerciseId" />
            <div class="form__grid">
              <div class="form__field">
                <label class="form__label" for="exerciseName">Nombre*</label>
                <input
                  class="form__input"
                  id="exerciseName"
                  type="text"
                  placeholder="Ej. Press banca con barra"
                  maxlength="60"
                  required
                />
              </div>
              <div class="form__field">
                <label class="form__label" for="exerciseDescription">Descripción</label>
                <textarea
                  class="form__input form__input--textarea"
                  id="exerciseDescription"
                  rows="2"
                  placeholder="Opcional"
                ></textarea>
              </div>
              <div class="form__field">
                <label class="form__label" for="exercisePrimaryMuscle">Grupo muscular principal</label>
                <input
                  class="form__input"
                  id="exercisePrimaryMuscle"
                  type="text"
                  placeholder="Ej. Pecho"
                />
              </div>
              <div class="form__field">
                <label class="form__label" for="exerciseEquipment">Equipamiento</label>
                <input
                  class="form__input"
                  id="exerciseEquipment"
                  type="text"
                  placeholder="Ej. Barra"
                />
              </div>
              <div class="form__field">
                <label class="form__label" for="exerciseTags">Tags (separados por coma)</label>
                <input
                  class="form__input"
                  id="exerciseTags"
                  type="text"
                  placeholder="Ej. fuerza, básico"
                />
              </div>
              <div class="form__field">
                <label class="form__label" for="exerciseCategorySelect">Categoría</label>
                <select class="form__input" id="exerciseCategorySelect"></select>
              </div>
            </div>
            <p class="form__error" id="exerciseError"></p>
            <div class="form__actions">
              <button class="button button--primary" type="submit" id="saveExerciseButton">
                Guardar ejercicio
              </button>
              <button class="button button--ghost" type="button" id="cancelExercise">
                Cancelar
              </button>
            </div>
          </form>

          <ul class="list" id="exerciseList"></ul>
        </section>

        <section class="panel" data-view="settings" hidden>
          <h2>Ajustes</h2>
          <div class="card">
            <p class="card__title">Tema</p>
            <p class="card__text">Cambia el aspecto sin salir de la app.</p>
            <button class="button button--primary" id="themeToggle">Alternar modo</button>
          </div>
          <div class="card">
            <p class="card__title">Datos locales</p>
            <p class="card__text">La biblioteca se guarda solo en este dispositivo.</p>
            <button class="button button--danger" id="resetLibrary">Borrar biblioteca</button>
          </div>
          <div class="card">
            <p class="card__title">Exportar / Importar</p>
            <p class="card__text">Guarda o restaura toda la base local en JSON.</p>
            <div class="form__actions">
              <button class="button button--primary" id="exportData">Exportar datos</button>
              <button class="button button--ghost" id="importData">Importar datos</button>
              <input type="file" id="importFile" accept="application/json" hidden />
            </div>
          </div>
          <div class="card">
            <p class="card__title">Actualizaciones</p>
            <p class="card__text">
              Limpia la cache de la app y fuerza una recarga completa si ves una version antigua.
            </p>
            <button class="button button--ghost" id="forceRefresh">Forzar actualizacion</button>
          </div>
          <p class="app__version">Version <span id="appVersion"></span></p>
          <div class="card">
            <p class="card__title">Sincronizacion</p>
            <p class="card__text">Estado de tu cuenta y datos en la nube.</p>
            <div class="sync-card">
              <div class="sync-session" id="cloudSessionPanel" hidden>
                <div class="sync-session__header">
                  <div class="sync-session__icon">✓</div>
                  <div>
                    <p class="sync-session__title">Sesion activa</p>
                    <p class="sync-session__email" id="cloudSessionEmail"></p>
                  </div>
                </div>
                <div class="status-row">
                  <span class="status-dot" id="cloudStatusDot"></span>
                  <p class="card__text" id="cloudStatus">No autenticado.</p>
                </div>
                <p class="card__text" id="cloudLastSync"></p>
                <div class="form__actions">
                  <button class="button button--danger" id="cloudLogout" hidden>Salir</button>
                </div>
              </div>

              <div class="form__actions sync-actions">
                <button class="button button--primary" id="cloudUpload" hidden>Subir datos</button>
                <button class="button button--ghost" id="cloudDownload" hidden>Descargar datos</button>
              </div>
            </div>
          </div>
        </section>

        <section class="panel" data-view="workout" hidden>
          <div class="panel__header">
            <div>
              <button class="button button--ghost" id="backToTrain">Volver</button>
              <h2 id="workoutTitle">Sesion activa</h2>
              <p class="panel__subtitle" id="workoutMeta"></p>
            </div>
            <div class="panel__actions">
              <button class="button button--danger" id="finishSessionButton">Finalizar sesion</button>
              <button class="button button--ghost" id="cancelSessionButton">Cancelar</button>
            </div>
          </div>
          <p class="form__error" id="workoutError"></p>
          <div class="stack" id="workoutExerciseList"></div>
        </section>
      </main>
    </div>

    <div class="modal" id="confirmModal" hidden>
      <div class="modal__overlay" data-action="cancel"></div>
      <div
        class="modal__dialog"
        role="dialog"
        aria-modal="true"
        aria-labelledby="confirmTitle"
        aria-describedby="confirmMessage"
      >
        <h3 class="modal__title" id="confirmTitle">Confirmar</h3>
        <p class="modal__message" id="confirmMessage"></p>
        <div class="modal__actions">
          <button class="button button--ghost" id="confirmCancel">Cancelar</button>
          <button class="button button--primary" id="confirmOk">Confirmar</button>
        </div>
      </div>
    </div>

    <div class="modal" id="resetModal" hidden>
      <div class="modal__overlay" id="resetOverlay"></div>
      <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="resetTitle">
        <h3 class="modal__title" id="resetTitle">Recuperar contraseña</h3>
        <p class="modal__message">
          Enviaremos un enlace para restablecer tu contraseña a este email.
        </p>
        <div class="form__field">
          <label class="form__label" for="resetEmail">Email</label>
          <input
            class="form__input"
            id="resetEmail"
            type="email"
            autocomplete="email"
            placeholder="tu@email.com"
          />
        </div>
        <p class="form__error" id="resetError"></p>
        <div class="modal__actions">
          <button class="button button--ghost" id="resetCancel">Cancelar</button>
          <button class="button button--primary" id="resetSend">Enviar enlace</button>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="app.js?v=0.10.5"></script>
  </body>
</html>
